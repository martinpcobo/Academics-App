{"ast":null,"code":"import _asyncToGenerator from \"/Users/martin.perez.cobo/Documents/Repositories/Academics-FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport AuthenticationService from \"../../../services/AuthenticationService\";\nimport ToastService from \"../../../services/ToastService\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nexport default class AuthenticatedGuard {\n  constructor(authenticate_service, toast_service, router) {\n    this.authenticate_service = authenticate_service;\n    this.toast_service = toast_service;\n    this.router = router;\n  }\n  canActivate() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      let authenticated = _this.authenticate_service.getUser() != null;\n      if (!authenticated) {\n        if (yield _this.authenticate_service.retrieveToken()) {\n          return true;\n        } else {\n          yield _this.router.navigate(['/login']);\n          return false;\n        }\n      } else {\n        return true;\n      }\n    })();\n  }\n  static {\n    this.ɵfac = function AuthenticatedGuard_Factory(t) {\n      return new (t || AuthenticatedGuard)(i0.ɵɵinject(AuthenticationService), i0.ɵɵinject(ToastService), i0.ɵɵinject(i1.Router));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthenticatedGuard,\n      factory: AuthenticatedGuard.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["AuthenticationService","ToastService","AuthenticatedGuard","constructor","authenticate_service","toast_service","router","canActivate","_this","_asyncToGenerator","authenticated","getUser","retrieveToken","navigate","i0","ɵɵinject","i1","Router","factory","ɵfac","providedIn"],"sources":["/Users/martin.perez.cobo/Documents/Repositories/Academics-FrontEnd/src/app/modules/routing/guards/AuthenticatedGuard.ts"],"sourcesContent":["import {Injectable} from \"@angular/core\";\nimport AuthenticationService from \"../../../services/AuthenticationService\";\nimport {Router} from \"@angular/router\";\nimport ToastService from \"../../../services/ToastService\";\n\n@Injectable({\n  providedIn: 'root'\n})\nexport default class AuthenticatedGuard {\n  constructor(private authenticate_service: AuthenticationService, private toast_service: ToastService, private router: Router) {\n  }\n\n  public async canActivate(): Promise<boolean> {\n    let authenticated: boolean = this.authenticate_service.getUser() != null;\n    if (!authenticated) {\n      if (await this.authenticate_service.retrieveToken()) {\n        return true;\n      } else {\n        await this.router.navigate(['/login']);\n        return false;\n      }\n    } else {\n      return true;\n    }\n  }\n}\n"],"mappings":";AACA,OAAOA,qBAAqB,MAAM,yCAAyC;AAE3E,OAAOC,YAAY,MAAM,gCAAgC;;;AAKzD,eAAc,MAAOC,kBAAkB;EACrCC,YAAoBC,oBAA2C,EAAUC,aAA2B,EAAUC,MAAc;IAAxG,KAAAF,oBAAoB,GAApBA,oBAAoB;IAAiC,KAAAC,aAAa,GAAbA,aAAa;IAAwB,KAAAC,MAAM,GAANA,MAAM;EACpH;EAEaC,WAAWA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACtB,IAAIC,aAAa,GAAYF,KAAI,CAACJ,oBAAoB,CAACO,OAAO,EAAE,IAAI,IAAI;MACxE,IAAI,CAACD,aAAa,EAAE;QAClB,UAAUF,KAAI,CAACJ,oBAAoB,CAACQ,aAAa,EAAE,EAAE;UACnD,OAAO,IAAI;SACZ,MAAM;UACL,MAAMJ,KAAI,CAACF,MAAM,CAACO,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;UACtC,OAAO,KAAK;;OAEf,MAAM;QACL,OAAO,IAAI;;IACZ;EACH;;;uBAhBmBX,kBAAkB,EAAAY,EAAA,CAAAC,QAAA,CAPhCf,qBAAqB,GAAAc,EAAA,CAAAC,QAAA,CAErBd,YAAY,GAAAa,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA;IAAA;EAAA;;;aAKEf,kBAAkB;MAAAgB,OAAA,EAAlBhB,kBAAkB,CAAAiB,IAAA;MAAAC,UAAA,EAFzB;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}